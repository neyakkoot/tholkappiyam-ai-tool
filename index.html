<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tholkappiyam AI - Prototype</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f9; color: #333; margin: 0; padding: 20px; }
        header { background-color: #2c3e50; color: white; padding: 20px; text-align: center; border-radius: 8px; margin-bottom: 20px; }
        h1 { margin: 0; font-size: 24px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .tabs { display: flex; border-bottom: 2px solid #ddd; margin-bottom: 20px; }
        .tab { padding: 10px 20px; cursor: pointer; font-weight: bold; color: #555; }
        .tab.active { border-bottom: 3px solid #e74c3c; color: #e74c3c; }
        .content { display: none; }
        .content.active { display: block; }
        
        /* Grammar Checker Styles */
        input[type="text"] { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; }
        button { background-color: #27ae60; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #219150; }
        #result { margin-top: 20px; padding: 15px; border-radius: 4px; display: none; }
        .error { background-color: #fadbd8; border-left: 5px solid #e74c3c; color: #c0392b; }
        .success { background-color: #d4efdf; border-left: 5px solid #27ae60; color: #1e8449; }
        
        /* Pronunciation Tutor Styles */
        .pronunciation-card { border: 1px solid #ddd; padding: 20px; text-align: center; border-radius: 8px; margin-top: 10px; }
        .letter-big { font-size: 80px; color: #2980b9; font-weight: bold; }
        .diagram-placeholder { width: 200px; height: 200px; background-color: #eee; border-radius: 50%; margin: 20px auto; display: flex; align-items: center; justify-content: center; border: 2px dashed #aaa; }
        .sutra-box { background-color: #f9f9f9; padding: 10px; border-left: 4px solid #f39c12; text-align: left; margin-top: 15px; font-style: italic; }
        
        footer { text-align: center; margin-top: 40px; font-size: 12px; color: #777; }
    </style>
</head>
<body>

<header>
    <h1>Tholkappiyam-AI: Pedagogical Tool</h1>
    <p>தொல்காப்பியத்தின் அடிப்படையில் இயங்கும் இலக்கண & உச்சரிப்புக் கருவி</p>
</header>

<div class="container">
    <div class="tabs">
        <div class="tab active" onclick="switchTab('grammar')">இலக்கணத் திருத்தி (Grammar)</div>
        <div class="tab" onclick="switchTab('pronunciation')">உச்சரிப்புப் பயிற்சியாளர் (Pronunciation)</div>
    </div>

    <div id="grammar" class="content active">
        <h2>சூழல் உணர் இலக்கணத் திருத்தி</h2>
        <p>தமிழ்ச் சொல்லை உள்ளிடுக (எ.கா: வுட்கை, கல்மம், நன்றி)</p>
        <input type="text" id="wordInput" placeholder="சொல்லை இங்கே தட்டச்சு செய்க...">
        <button onclick="checkGrammar()">சோதிக்கவும்</button>
        
        <div id="result"></div>
    </div>

    <div id="pronunciation" class="content">
        <h2>AI உச்சரிப்புப் பயிற்சியாளர்</h2>
        <p>கடினமான தமிழ் ஒலிகளைத் தேர்ந்தெடுக்கவும்:</p>
        <select id="letterSelect" onchange="showPronunciation()" style="padding: 10px; font-size: 16px;">
            <option value="">தேர்ந்தெடு...</option>
            <option value="zh">ழ (Zh)</option>
            <option value="L">ள (L)</option>
            <option value="R">ற (R)</option>
        </select>

        <div id="tutorDisplay" style="display:none;">
            <div class="pronunciation-card">
                <div class="letter-big" id="dispLetter">ழ</div>
                
                <div class="diagram-placeholder">
                    <span id="diagramText">நாக்கு வளைந்து<br>அண்ணத்தை வருடும்<br>வரைபடம் (Animation)</span>
                    </div>

                <div class="sutra-box">
                    <strong>தொல்காப்பிய விதி (AI Logic):</strong><br>
                    <span id="sutraText">...</span>
                </div>
                
                <p id="instructionText" style="margin-top:15px; font-weight:bold;"></p>
            </div>
        </div>
    </div>
</div>

<footer>
    <p>Developed by Dr. Sathiyaraj Thangasamy & Team | Licensed under MIT License</p>
    <p>Based on Tholkappiyam (Ezhuthathikaram)</p>
</footer>

<script>
    // Tab Switching Logic
    function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        
        document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
        document.getElementById(tabName).classList.add('active');
    }

    // --- 1. GRAMMAR CHECKER LOGIC (Rule-Based AI) ---
    function checkGrammar() {
        let word = document.getElementById('wordInput').value.trim();
        let resultDiv = document.getElementById('result');
        resultDiv.style.display = 'block';
        
        // Simulating the AI Rules (As per our Research Paper)
        
        // Rule 1: Mozhimarapu 30 (Vu cannot start a word)
        // Checks for 'வு' (Vu) at the start
        if (word.startsWith('வு')) {
            resultDiv.className = 'error';
            resultDiv.innerHTML = `
                <strong>பிழை (Invalid):</strong> '${word}' என்ற சொல் தவறானது.<br><br>
                <strong>AI விளக்கம்:</strong> இது <em>மொழிமரபு நூற்பா 30</em>-ஐ மீறுகிறது. <br>
                'வ' (V) என்ற மெய் 'உ' (u) என்ற உயிருடன் கூடி மொழிக்கு முதலில் வராது.<br>
                <em>(பரிந்துரை: 'வெட்கம்' அல்லது பிற சொற்களைப் பயன்படுத்தவும்).</em>
            `;
            return;
        }

        // Rule 2: Nunmarapu 23 (Meimayakkam - L cannot follow M)
        // Checks for 'ல்' followed by 'ம' series
        if (word.includes('ல்ம') || word.includes('ல்மி') || word.includes('ல்மு')) {
             // Exception check for Sandhi could be added here
            resultDiv.className = 'error';
            resultDiv.innerHTML = `
                <strong>பிழை (Invalid):</strong> '${word}' என்பதில் மயக்கம் (Cluster) தவறானது.<br><br>
                <strong>AI விளக்கம்:</strong> இது <em>நூன்மரபு நூற்பா 23</em>-ஐ மீறுகிறது.<br>
                'ல்' (l) என்ற ஒற்றைத் தொடர்ந்து 'க், ச், ப்' மட்டுமே வரலாம். 'ம்' (m) வரக்கூடாது.<br>
                <em>(குறிப்பு: இது வேற்றுமைப் புணர்ச்சியாக இருந்தால் மட்டுமே ஏற்கப்படும்).</em>
            `;
            return;
        }

        // If no rules violated (Simple simulation)
        if (word.length > 0) {
            resultDiv.className = 'success';
            resultDiv.innerHTML = `
                <strong>சரி (Valid):</strong> '${word}' அகராதி மற்றும் இலக்கண விதிகளின்படி சரியாக உள்ளது.<br>
                <em>(AI சோதனை: தொல்காப்பிய விதி மீறல் இல்லை).</em>
            `;
        }
    }

    // --- 2. PRONUNCIATION TUTOR LOGIC (Pirappiyal Rules) ---
    function showPronunciation() {
        let val = document.getElementById('letterSelect').value;
        let display = document.getElementById('tutorDisplay');
        
        if (!val) { display.style.display = 'none'; return; }
        
        display.style.display = 'block';
        let letter = '', sutra = '', instruction = '', diagram = '';

        if (val === 'zh') {
            letter = 'ழ (Zh)';
            sutra = '"நுனி நா அணரி அண்ணம் வருடல்..." (பிறப்பியல் நூற்பா 13)';
            instruction = "Instruction: Raise the tip of your tongue, curl it back slightly (அணரி), and gently rub (வருடல்) the hard palate.";
            diagram = "நாக்கு வளைந்து<br>அண்ணத்தை வருடுதல்";
        } else if (val === 'L') {
            letter = 'ள (L)';
            sutra = '"நா விளிம்பு வீங்கி அண்ணம் வருட..." (பிறப்பியல் நூற்பா 14)';
            instruction = "Instruction: Spread the edges of your tongue (வீங்கி) and stroke the palate.";
            diagram = "நா விளிம்பு வீங்கி<br>அண்ணத்தை வருடுதல்";
        } else if (val === 'R') {
            letter = 'ற (R)';
            sutra = '"நுனி நா அணரி அண்ணம் ஒற்ற..." (பிறப்பியல் நூற்பா 13)';
            instruction = "Instruction: Raise the tongue tip and firmly tap/hit (ஒற்ற) the hard palate.";
            diagram = "நா நுனி<br>அண்ணத்தை ஒற்றல்";
        }

        document.getElementById('dispLetter').innerText = letter;
        document.getElementById('sutraText').innerText = sutra;
        document.getElementById('instructionText').innerText = instruction;
        document.getElementById('diagramText').innerHTML = diagram;
    }
</script>

</body>
</html>